{"version":3,"sources":["components/App/index.js","components/App/App.js","index.js"],"names":["App","state","photo","date","Date","componentDidMount","first","sessionStorage","getItem","setState","getData","onChange","then","body","setItem","url","fuultear","this","getFullYear","day","getDate","month","getMonth","fetch","response","ok","value","json","className","undefined","indexOf","src","alt","defaultActiveStartDate","React","Component","ReactDom","render","document","getElementById"],"mappings":"iRAEeA,G,kNCObC,MAAQ,CACNC,MAAO,6EACPC,KAAM,IAAIC,KAAK,KAAM,GAAG,K,EAG1BC,kBAAoB,SAACF,GACnB,IAAMG,EAAQC,eAAeC,QAAQ,aACrC,EAAKC,SAAS,CACZN,KAAM,IAAIC,KAAKE,KAEjB,EAAKI,W,EA2BPC,SAAW,SAACR,GACV,EAAKM,SAAU,CACbN,SAGF,EAAKO,UACHE,MAAK,SAACC,GACLN,eAAeO,QAAQ,YAAa,EAAKb,MAAME,MAC/C,EAAKM,SAAS,CACZP,MAAOW,EAAKE,U,qLAhCXC,EAAWC,KAAKhB,MAAME,KAAKe,cAC3BC,EAAMF,KAAKhB,MAAME,KAAKiB,UACtBC,EAAQJ,KAAKhB,MAAME,KAAKmB,W,SAEPC,MAAM,4CAAD,OAA6CP,EAA7C,YAAyDK,EAAzD,YAAkEF,EAAlE,8D,WAAtBK,E,QAEOC,G,yCAGP,6BACE,wGACF,kBAAC,IAAD,CACId,SAAUM,KAAKN,SACfe,MAAOT,KAAKhB,MAAME,S,wBAMfqB,EAASG,O,+KAmBf,IAAD,EAEcV,KAAKhB,MAApBC,EAFC,EAEDA,MAEL,OAJM,EAEMC,KAED,IAAIC,KAET,yBAAKwB,UAAU,OACX,yBAAKA,UAAU,oBACb,uKAEF,kBAAC,IAAD,CACIjB,SAAUM,KAAKN,SACfe,MAAOT,KAAKhB,MAAME,aAMjB0B,IAAV3B,IAA2D,IAApCA,EAAM4B,QAAQ,iBAExC,yBAAKF,UAAU,OACX,yBAAKA,UAAU,YACb,2JACA,kQACA,6MAEF,kBAAC,IAAD,CACIjB,SAAUM,KAAKN,SACfe,MAAOT,KAAKhB,MAAME,QAO1B,yBAAKyB,UAAU,OACX,yBAAKG,IAAK7B,EAAO8B,IAAI,iBACrB,kBAAC,IAAD,CACIrB,SAAUM,KAAKN,SACfe,MAAOT,KAAKhB,MAAME,KAClB8B,uBAAwB,IAAI7B,Y,GA9FT8B,IAAMC,YCHvCC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.a54de9bb.chunk.js","sourcesContent":["import App from \"./App\";\r\n\r\nexport default App;","import React from 'react';\nimport './App.css';\n\n\nimport Calendar from 'react-calendar';\nimport 'react-calendar/dist/Calendar.css';\n\nexport default class App extends React.Component {\n  \n  state = {\n    photo: 'https://apod.nasa.gov/apod/image/2005/PorpoiseGalaxy_HubbleFraile_1300.jpg',\n    date: new Date(2019, 10,11) , \n  }\n\n  componentDidMount = (date) => {\n    const first = sessionStorage.getItem('firstdate')\n    this.setState({\n      date: new Date(first)\n    })\n    this.getData()\n  }\n  \n  async getData  () {\n    const fuultear = this.state.date.getFullYear()\n    const day = this.state.date.getDate()\n    const month = this.state.date.getMonth()\n  \n    const response = await fetch(`https://api.nasa.gov/planetary/apod?date=${fuultear}-${month}-${day}&hd=True&api_key=TmzKsJwGltpO9CFAxZbP4JFrG8QipD4IXChaMjmZ`);\n    \n    if(!response.ok){\n        // throw new Error(`we have a problem with fetch`)\n        return (\n          <div>\n            <p>Выберите дату</p>\n          <Calendar \n              onChange={this.onChange}\n              value={this.state.date}\n          />\n          </div>\n        )\n    }\n\n    return await response.json();\n  }\n\n\n  onChange = (date) => {\n    this.setState ({\n      date,\n    })\n\n    this.getData()\n     .then((body) => {\n       sessionStorage.setItem('firstdate', this.state.date)\n       this.setState({\n         photo: body.url,\n       })\n      })\n  }\n\n\n  render(){\n\n    let {photo, date} = this.state;\n    \n    if (date > new Date()){\n      return (\n          <div className=\"App\">\n              <div className='AppUncoorectDate'>\n                <p>Проверьте выбранную дату!</p>\n            </div> \n              <Calendar \n                  onChange={this.onChange}\n                  value={this.state.date}\n              />\n          </div>\n      )\n    }\n    \n    if ((photo === undefined)||(photo.indexOf(\"apod.nasa.gov\") === -1)) {\n      return (\n      <div className=\"App\">\n          <div className=\"AppImage\">\n            <p>Не удалось открыть фото.</p> \n            <p>Возможно указанный источник не существует.</p>\n            <p>Пожалуйста, выберите другую дату!</p>\n            </div>\n          <Calendar \n              onChange={this.onChange}\n              value={this.state.date}\n          />\n      </div>\n      )\n    }\n\n    return (\n      <div className=\"App\">\n          <img src={photo} alt=\"photo_of_day\"/>\n          <Calendar \n              onChange={this.onChange}\n              value={this.state.date} \n              defaultActiveStartDate={new Date()} \n          />\n      </div>\n    )\n    }\n      \n}\n\n","import React from 'react';\nimport ReactDom from 'react-dom';\nimport App from './components/App';\n\nReactDom.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}